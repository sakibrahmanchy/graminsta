{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sakibur/projects/Personal Projects/test/graminsta/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sakibur/projects/Personal Projects/test/graminsta/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sakibur/projects/Personal Projects/test/graminsta/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import BackgroundImage from'./images/login.jpeg';import{setCookie}from'./cookies';import ReactDOM from\"react-dom\";import{Redirect}from'react-router';import App from\"./App\";export default function Login(_ref){var onSuccessfulLogin=_ref.onSuccessfulLogin;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),redirect=_useState6[0],setRedirect=_useState6[1];var getField=function getField(fieldId){return document.getElementById(fieldId);};var loginValidated=function loginValidated(token){setCookie('token',token,60*1000);setRedirect(true);};var loginUser=function loginUser(email,password){fetch('http://localhost:8078/login',{method:'POST',headers:new Headers({'Authorization':'Basic eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjIsImlhdCI6MTU5NjQwNjY3MywiZXhwIjoxNTk2NDEwMjczfQ.7GQBLLDQFZxm1dXPQTd3jN0ArmHOoyPxOUb5bTTMcrs','Content-Type':'application/json'}),body:JSON.stringify({email:email,password:password})}).then(function(res){return res.json();}).then(function(res){console.log(res);if(res.token){loginValidated(res.token);}}).catch(function(e){throw e;});};var typeAuto=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(text,fieldId){var data,field;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:data=text.split('');field=getField(fieldId);field.value='';_context2.next=5;return function(){var _autoTypeMe=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var letter;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:letter=data.shift();field.value+=letter;if(!data.length){_context.next=8;break;}_context.t0=setTimeout;_context.next=6;return autoTypeMe;case 6:_context.t1=_context.sent;(0,_context.t0)(_context.t1,20);case 8:case\"end\":return _context.stop();}}},_callee);}));function autoTypeMe(){return _autoTypeMe.apply(this,arguments);}return autoTypeMe;}()();case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function typeAuto(_x,_x2){return _ref2.apply(this,arguments);};}();var loginWithMockUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var email,password;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:// const email = 'demouser@graminsta.com';\n// const password = 'demouser@graminsta';\nemail='Dee0@gmail.com';password='fakepass';_context3.next=4;return typeAuto(email,'email');case 4:_context3.next=6;return typeAuto(password,'password');case 6:_context3.next=8;return loginUser(email,password);case 8:case\"end\":return _context3.stop();}}},_callee3);}));return function loginWithMockUser(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",null,redirect&&/*#__PURE__*/React.createElement(Redirect,{to:\"/dashboard\"}),/*#__PURE__*/React.createElement(\"img\",{alt:\"\",src:BackgroundImage,className:\"bg-image\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"login-form overlay\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-center curl-fonts large-fonts\"},/*#__PURE__*/React.createElement(\"h1\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Gram\",/*#__PURE__*/React.createElement(\"i\",null,\"Insta\")))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",{className:\"text-center\"},\"Login\"),/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-field\"},/*#__PURE__*/React.createElement(\"input\",{type:\"email\",placeholder:\"Email\",autoComplete:\"nope\",id:\"email\",value:email,onChange:function onChange(e){setEmail(e.target.value);},disabled:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"input-field\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:\"Password\",autoComplete:\"new-password\",id:\"password\",value:password,onChange:function onChange(e){setPassword(e.target.value);},disabled:true})),/*#__PURE__*/React.createElement(\"a\",{className:\"link\"},\"gramInsta, love thy art\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn-red\",onClick:loginWithMockUser},\"Login as mock user\")))));};var root=document.getElementById('login');if(typeof document!=='undefined'&&root){ReactDOM.render(/*#__PURE__*/React.createElement(Login,null),root);}","map":{"version":3,"sources":["/Users/sakibur/projects/Personal Projects/test/graminsta/src/login.jsx"],"names":["React","useState","useEffect","BackgroundImage","setCookie","ReactDOM","Redirect","App","Login","onSuccessfulLogin","email","setEmail","password","setPassword","redirect","setRedirect","getField","fieldId","document","getElementById","loginValidated","token","loginUser","fetch","method","headers","Headers","body","JSON","stringify","then","res","json","console","log","catch","e","typeAuto","text","data","split","field","value","letter","shift","length","setTimeout","autoTypeMe","loginWithMockUser","target","root","render"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport BackgroundImage from './images/login.jpeg';\nimport { setCookie } from './cookies';\nimport ReactDOM from \"react-dom\";\nimport { Redirect } from 'react-router'\nimport App from \"./App\";\nexport default function Login ({ onSuccessfulLogin }) {\n\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [redirect, setRedirect] = useState(false);\n\n    const getField = (fieldId) => {\n        return document.getElementById(fieldId);\n    };\n\n    const loginValidated = (token) => {\n                setCookie('token', token, 60*1000);\n                setRedirect(true);\n    }\n\n    const loginUser = (email, password) => {\n        fetch('http://localhost:8078/login', {\n            method: 'POST',\n            headers: new Headers({\n                'Authorization': 'Basic eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjIsImlhdCI6MTU5NjQwNjY3MywiZXhwIjoxNTk2NDEwMjczfQ.7GQBLLDQFZxm1dXPQTd3jN0ArmHOoyPxOUb5bTTMcrs',\n                'Content-Type': 'application/json'\n            }),\n            body: JSON.stringify({\n                email,\n                password,\n            })\n        }).then(res => res.json()).then(res => {\n            console.log(res);\n            if (res.token) {\n               loginValidated(res.token);\n            }\n        }).catch(e => {\n            throw e;\n        });\n    } ;\n\n    const typeAuto = async (text, fieldId) => {\n        const data = text.split('');\n        const field = getField(fieldId);\n        field.value = '';\n        await (async function autoTypeMe() {\n            var letter = data.shift();\n            field.value += letter;\n            if (data.length) {\n                setTimeout(await autoTypeMe, 20);\n            }\n        }());\n    };\n\n    const loginWithMockUser = async () => {\n        // const email = 'demouser@graminsta.com';\n        // const password = 'demouser@graminsta';\n        const email = 'Dee0@gmail.com';\n        const password = 'fakepass';\n        await typeAuto(email, 'email');\n        await typeAuto(password, 'password');\n        await loginUser(email, password);\n    };\n\n    return (\n        <div>\n            {redirect && <Redirect to=\"/dashboard\" />}\n           <img alt=\"\" src={BackgroundImage} className=\"bg-image\"/>\n            <div className=\"login-form overlay\">\n                <div className=\"text-center curl-fonts large-fonts\">\n                    <h1><b>Gram<i>Insta</i></b></h1>\n                </div>\n                <br/>\n                <div>\n                    <h2 className=\"text-center\">Login</h2>\n                    <div className=\"content\">\n                        <div className=\"input-field\">\n                            <input\n                                type=\"email\"\n                                placeholder=\"Email\"\n                                autoComplete=\"nope\"\n                                id=\"email\"\n                                value={email}\n                                onChange={(e) => {setEmail(e.target.value)}}\n                                disabled\n                            />\n                        </div>\n                        <div className=\"input-field\">\n                            <input\n                                type=\"password\"\n                                placeholder=\"Password\"\n                                autoComplete=\"new-password\"\n                                id=\"password\"\n                                value={password}\n                                onChange={(e) => {setPassword(e.target.value)}}\n                                disabled\n                            />\n                        </div>\n                        <a className=\"link\">gramInsta, love thy art</a>\n                    </div>\n                    {/*<div className=\"action\">*/}\n                    {/*    <button className=\"btn-red\">Register</button>*/}\n                    {/*    <button onClick={() => loginUser(email, password)}>Sign in</button>*/}\n                    {/*</div>*/}\n                    <div>\n                        <button className=\"btn-red\" onClick={loginWithMockUser}>Login as mock user</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n\nconst root = document.getElementById('login');\n\nif (typeof document !== 'undefined' && root) { ReactDOM.render(<Login />, root); }\n"]},"metadata":{},"sourceType":"module"}