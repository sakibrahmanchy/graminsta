{"ast":null,"code":"import _regeneratorRuntime from\"/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{makeStyles}from'@material-ui/core/styles';import AppBar from'@material-ui/core/AppBar';import Toolbar from'@material-ui/core/Toolbar';import Typography from'@material-ui/core/Typography';import Button from'@material-ui/core/Button';import Post from'./Post';import{getCookie}from'./cookies';import LinearProgress from'@material-ui/core/LinearProgress';var useStyles=makeStyles(function(theme){return{root:{flexGrow:1},menuButton:{marginRight:theme.spacing(2)},title:{flexGrow:1}};});export default function Dashboard(_ref){var onProfileClick=_ref.onProfileClick;var classes=useStyles();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isBusy=_useState4[0],setBusy=_useState4[1];useEffect(function(){setBusy(true);function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url='http://localhost:8078/posts';fetch(url,{method:'get',headers:new Headers({'Authorization':\"Basic \".concat(getCookie('token')),'Content-Type':'application/json'})}).then(function(res){return res.json();}).then(function(response){console.log(response);setBusy(false);setData(response);}).catch(function(){setBusy(false);setData(null);});case 2:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[]);console.log(data);return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(AppBar,{position:\"fixed\",color:\"white\"},/*#__PURE__*/React.createElement(Toolbar,null,/*#__PURE__*/React.createElement(Typography,{variant:\"h4\"},/*#__PURE__*/React.createElement(\"span\",{className:\"curl-fonts\"},\"GramInsta\")),/*#__PURE__*/React.createElement(Button,{color:\"inherit\"},\"Login\"))),isBusy&&/*#__PURE__*/React.createElement(LinearProgress,{color:\"secondary\",style:{marginTop:'3%',height:'2rem'}}),!isBusy&&data&&Array.isArray(data)&&/*#__PURE__*/React.createElement(\"div\",null,data&&data.map(function(_ref2){var photos=_ref2.photos,content=_ref2.content,_ref2$user=_ref2.user,name=_ref2$user.name,id=_ref2$user.id;console.log(content);var _photos=_slicedToArray(photos,1),thumbUrl=_photos[0].thumbUrl;console.log(thumbUrl);// eslint-disable-next-line no-unused-expressions\nreturn/*#__PURE__*/React.createElement(Post,{image:thumbUrl,content:content,userName:name,id:id,onUserClick:function onUserClick(id){onProfileClick();}});})));}","map":{"version":3,"sources":["/app/src/Dashboard.jsx"],"names":["React","useState","useEffect","makeStyles","AppBar","Toolbar","Typography","Button","Post","getCookie","LinearProgress","useStyles","theme","root","flexGrow","menuButton","marginRight","spacing","title","Dashboard","onProfileClick","classes","data","setData","isBusy","setBusy","fetchData","url","fetch","method","headers","Headers","then","res","json","response","console","log","catch","marginTop","height","Array","isArray","map","photos","content","user","name","id","thumbUrl"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Post from './Post';\nimport { getCookie } from './cookies'\n\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flexGrow: 1,\n    },\n    menuButton: {\n        marginRight: theme.spacing(2),\n    },\n    title: {\n        flexGrow: 1,\n    },\n}));\n\nexport default function Dashboard({ onProfileClick }) {\n    const classes = useStyles();\n\n\n    const [data, setData] = useState(null);\n    const [isBusy, setBusy] = useState(true)\n\n    useEffect(() => {\n        setBusy(true);\n        async function fetchData() {\n            const url = 'http://localhost:8078/posts';\n\n            fetch(url, {\n                method: 'get',\n                headers: new Headers({\n                    'Authorization': `Basic ${getCookie('token')}`,\n                    'Content-Type': 'application/json'\n                }),\n            }).then(res => res.json()).then((response) => {\n                console.log(response);\n                setBusy(false);\n                setData(response);\n            }).catch(() => {\n                setBusy(false);\n                setData(null);\n            });\n        }\n\n        fetchData();\n    }, [])\n    console.log(data);\n    return (\n        <div className={classes.root}>\n            <AppBar position=\"fixed\" color=\"white\">\n                <Toolbar>\n                    <Typography variant=\"h4\">\n                        <span className=\"curl-fonts\">GramInsta</span>\n                    </Typography>\n                    <Button color=\"inherit\">Login</Button>\n                </Toolbar>\n            </AppBar>\n            {isBusy && <LinearProgress color=\"secondary\" style={{ marginTop: '3%', height: '2rem' }}/>}\n            {!isBusy && data && Array.isArray(data) && <div>\n                {data && data.map(({ photos, content, user: { name, id } })=> {\n                    console.log(content);\n                    const [{ thumbUrl }] = photos;\n                    console.log(thumbUrl);\n                    // eslint-disable-next-line no-unused-expressions\n                    return <Post image={thumbUrl} content={content} userName={name} id={id} onUserClick={(id) => {onProfileClick()}} />\n                })}\n            </div>}\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}