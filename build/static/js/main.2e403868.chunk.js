(this["webpackJsonpreact-apollo-express"]=this["webpackJsonpreact-apollo-express"]||[]).push([[0],{104:function(e,t,a){e.exports=a(118)},109:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),o=a.n(c),i=a(85),l=a(89),s=(a(65),a(61)),m=(a(109),a(36)),u=a(38);a(39);function d(){var e=Object(m.a)(["\n  {\n    getPreviousPosts {\n      content\n      date\n     }\n  }\n"]);return d=function(){return e},e}Object(u.a)(d());var p=a(12);function g(){var e=Object(m.a)(["\n  {\n    getLatestPost {\n      content\n      date\n     }\n  }\n"]);return g=function(){return e},e}Object(u.a)(g());function h(){var e=Object(m.a)(["\nmutation CreatePost($content: String) {\n  createPost(content: $content) {\n    content,\n    date\n  }\n}"]);return h=function(){return e},e}Object(u.a)(h());var f=a(25),E=a.n(f),v=a(31),b=a(81),j=a.n(b),w=function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var r=a[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},y=a(11);function x(e){e.onSuccessfulLogin;var t=Object(n.useState)(""),a=Object(p.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(""),l=Object(p.a)(i,2),s=l[0],m=l[1],u=Object(n.useState)(!1),d=Object(p.a)(u,2),g=d[0],h=d[1],f=function(e){return document.getElementById(e)},b=function(e){!function(e,t,a){var n=new Date;n.setTime(n.getTime()+a);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"}("token",e,6e4),h(!0)},w=function(e,t){fetch("http://localhost:8078/login",{method:"POST",headers:new Headers({Authorization:"Basic eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjIsImlhdCI6MTU5NjQwNjY3MywiZXhwIjoxNTk2NDEwMjczfQ.7GQBLLDQFZxm1dXPQTd3jN0ArmHOoyPxOUb5bTTMcrs","Content-Type":"application/json"}),body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.token&&b(e.token)})).catch((function(e){throw e}))},x=function(){var e=Object(v.a)(E.a.mark((function e(t,a){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.split(""),(r=f(a)).value="",e.next=5,function(){var e=Object(v.a)(E.a.mark((function e(){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.shift(),r.value+=a,!n.length){e.next=8;break}return e.t0=setTimeout,e.next=6,t;case 6:e.t1=e.sent,(0,e.t0)(e.t1,20);case 8:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()();case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(v.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="Dee0@gmail.com",a="fakepass",e.next=4,x(t,"email");case 4:return e.next=6,x(a,"password");case 6:return e.next=8,w(t,a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,g&&r.a.createElement(y.a,{to:"/dashboard"}),r.a.createElement("img",{alt:"",src:j.a,className:"bg-image"}),r.a.createElement("div",{className:"login-form overlay"},r.a.createElement("div",{className:"text-center curl-fonts large-fonts"},r.a.createElement("h1",null,r.a.createElement("b",null,"Gram",r.a.createElement("i",null,"Insta")))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("h2",{className:"text-center"},"Login"),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"email",placeholder:"Email",autoComplete:"nope",id:"email",value:c,onChange:function(e){o(e.target.value)},disabled:!0})),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"password",placeholder:"Password",autoComplete:"new-password",id:"password",value:s,onChange:function(e){m(e.target.value)},disabled:!0})),r.a.createElement("a",{className:"link"},"gramInsta, love thy art")),r.a.createElement("div",null,r.a.createElement("button",{className:"btn-red",onClick:O},"Login as mock user")))))}var O=document.getElementById("login");"undefined"!==typeof document&&O&&o.a.render(r.a.createElement(x,null),O);var k=a(160),N=(a(6),a(161)),C=a(162),T=a(164),S=a(165),I=a(173),B=a(156),P=a(51),A=a(62),L=a(59),G=a.n(L),U=a(83),D=a.n(U),J=a(163),W=a(58),z=a(7),H=a(159),M=a(171),Q=a(155),q=a(157),R=a(158),V=a(82),X=a.n(V),$=(Object(z.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,n=e.onClose,c=Object(s.a)(e,["children","classes","onClose"]);return r.a.createElement(Q.a,Object.assign({disableTypography:!0,className:a.root},c),r.a.createElement(P.a,{variant:"h6"},t),n?r.a.createElement(B.a,{"aria-label":"close",className:a.closeButton,onClick:n},r.a.createElement(X.a,null)):null)})),Object(z.a)((function(e){return{root:{padding:e.spacing(2)}}}))(q.a)),F=Object(z.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(R.a);function Z(e){var t=e.opened,a=r.a.useState(t),n=Object(p.a)(a,2),c=n[0],o=n[1],i=function(){o(!1)};return r.a.createElement("div",null,r.a.createElement(M.a,{onClose:i,"aria-labelledby":"customized-dialog-title",open:c},r.a.createElement($,{dividers:!0},r.a.createElement(P.a,{gutterBottom:!0},"Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros."),r.a.createElement(P.a,{gutterBottom:!0},"Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor."),r.a.createElement(P.a,{gutterBottom:!0},"Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.")),r.a.createElement(F,null,r.a.createElement(H.a,{autoFocus:!0,onClick:i,color:"primary"},"Save changes"))))}var Y=Object(k.a)((function(e){return{root:{maxWidth:600},media:{height:500,width:750,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:A.a[500]}}})),_={background:"lightPink"};function K(e){var t=e.image,a=e.content,n=e.userName,c=void 0===n?"":n,o=e.id,i=(e.onUserClick,Y()),l=r.a.useState(!1),s=Object(p.a)(l,2),m=(s[0],s[1],r.a.useState(!0)),u=Object(p.a)(m,2),d=u[0],g=u[1],h=r.a.useState(!1),f=Object(p.a)(h,2),E=f[0],v=f[1];return r.a.createElement("div",null,r.a.createElement(N.a,{className:i.root,style:{marginLeft:"30%",marginTop:"5%"},onClick:function(){v(!0)}},r.a.createElement(C.a,{avatar:d?r.a.createElement(J.a,{style:_,animation:"wave",variant:"circle",width:40,height:40}):r.a.createElement(I.a,{"aria-label":"recipe",className:i.avatar},c.split("")[0]),action:r.a.createElement(B.a,{"aria-label":"settings"},r.a.createElement(D.a,null)),title:d?r.a.createElement(J.a,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}):r.a.createElement(W.b,{to:"profile/".concat(o)},c," "),subheader:d?r.a.createElement(J.a,{animation:"wave",height:10,width:"40%"}):"5 hours ago"}),d?r.a.createElement(J.a,{style:_,variant:"rect",width:600,height:500}):null,r.a.createElement("img",{width:"600px",height:"500px",src:t,title:"Paella dish",onLoad:function(){g(!1)}}),r.a.createElement(T.a,null,r.a.createElement(P.a,{variant:"body2",color:"textSecondary",component:"p"},a)),r.a.createElement(S.a,{disableSpacing:!0},r.a.createElement(B.a,{"aria-label":"add to favorites"},r.a.createElement(G.a,null)))),r.a.createElement(Z,{opened:E}))}var ee=a(90),te=a(166),ae=a(167),ne=a(168),re=Object(k.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function ce(e){var t=e.onProfileClick,a=re(),c=Object(n.useState)(null),o=Object(p.a)(c,2),i=o[0],l=o[1],s=Object(n.useState)(!0),m=Object(p.a)(s,2),u=m[0],d=m[1],g=Object(n.useState)(0),h=Object(p.a)(g,2),f=h[0],b=h[1];return Object(n.useEffect)((function(){function e(){return(e=Object(v.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:10,t="http://localhost:8078/posts?take=".concat(10,"&skip=").concat(f),fetch(t,{method:"get",headers:new Headers({Authorization:"Basic ".concat(w("token")),"Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(e){if(d(!1),e.posts){var t=e.posts;l([].concat(Object(ee.a)(i),[t])),b(f+t.length)}})).catch((function(){d(!1),l(null)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}d(!0),function(){e.apply(this,arguments)}()}),[]),r.a.createElement("div",{className:a.root},r.a.createElement(te.a,{position:"fixed",color:"white"},r.a.createElement(ae.a,null,r.a.createElement(P.a,{variant:"h4"},r.a.createElement("span",{className:"curl-fonts"},"GramInsta")),r.a.createElement(H.a,{color:"inherit"},"Login"))),u&&r.a.createElement(ne.a,{color:"secondary",style:{marginTop:"3%",height:"2rem"}}),!u&&i&&Array.isArray(i)&&r.a.createElement("div",null,i&&i.map((function(e){var a=e.photos,n=e.content,c=e.user,o=c.name,i=c.id,l=Object(p.a)(a,1)[0].thumbUrl;return r.a.createElement(K,{image:l,content:n,userName:o,id:i,onUserClick:function(e){t()}})}))))}var oe=a(170),ie=a(172),le=a(169),se=a(93),me=a(84),ue=a.n(me),de=a(69),pe=a.n(de),ge=Object(k.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"center",overflow:"hidden",flexDirection:"column",backgroundColor:e.palette.background.paper},user:{flexGrow:1,marginTop:"5%"},list:{flexGrow:1,padding:e.spacing(2),margin:"auto"},paper:{padding:e.spacing(2),margin:"auto",maxWidth:500},image:{width:128,height:128},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"},large:{width:e.spacing(15),height:e.spacing(15)}}}));function he(e){var t=e.match,a=(t=void 0===t?{}:t).params,c=(a=void 0===a?{}:a).id,o=void 0===c?0:c,i=ge(),l=Object(n.useState)(null),s=Object(p.a)(l,2),m=s[0],u=s[1],d=Object(n.useState)(!0),g=Object(p.a)(d,2),h=g[0],f=g[1];Object(n.useEffect)((function(){function e(){return(e=Object(v.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="http://localhost:8078/posts?user_id=".concat(o),fetch(t,{method:"get",headers:new Headers({Authorization:"Basic ".concat(w("token")),"Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(e){f(!1),u(e)})).catch((function(){f(!1),u(null)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}f(!0),function(){e.apply(this,arguments)}()}),[]);var b=!h&&m&&m[0];return r.a.createElement("div",{className:i.root},r.a.createElement(te.a,{position:"fixed",color:"white"},r.a.createElement(ae.a,null,r.a.createElement(P.a,{variant:"h4"},r.a.createElement("span",{className:"curl-fonts"},"GramInsta")))),r.a.createElement("div",{className:i.user},r.a.createElement("div",{className:i.paper},r.a.createElement(le.a,{container:!0,spacing:6},r.a.createElement(le.a,{item:!0},r.a.createElement(se.a,{className:i.image},b?r.a.createElement(I.a,{"aria-label":"recipe",className:i.large},r.a.createElement("h1",null,m[0].user.name.split("")[0])):r.a.createElement(J.a,{animation:"wave",variant:"circle",width:40,height:40}))),r.a.createElement(le.a,{item:!0,xs:12,md:!0,container:!0},r.a.createElement(le.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:4},r.a.createElement(le.a,{item:!0,xs:!0},b?r.a.createElement(P.a,{gutterBottom:!0,variant:"h3"},m[0].user.name):r.a.createElement(J.a,{animation:"wave",variant:"text"}),r.a.createElement(le.a,{item:!0,xs:!0,container:!0,direction:"row",spacing:2},r.a.createElement(le.a,{item:!0,xs:!0},b?r.a.createElement(P.a,{gutterBottom:!0,variant:"body1"},r.a.createElement(ue.a,null)," ",m.length," Posts"):r.a.createElement(J.a,{animation:"wave",variant:"text"})),r.a.createElement(le.a,{item:!0,xs:!0},b?r.a.createElement(P.a,{gutterBottom:!0,variant:"body1"},r.a.createElement(pe.a,null)," ",m.length," Comments"):r.a.createElement(J.a,{animation:"wave",variant:"text"}))))))))),r.a.createElement("div",{className:i.list,style:{marginTop:"5%"}},h&&r.a.createElement(ne.a,{color:"secondary",style:{marginTop:"3%",height:"2rem"}}),b&&r.a.createElement(oe.a,{cellHeight:293,className:"gridList",cols:3},m&&m.map((function(e){var t=e.photos,a=e.content,n=(e.user.name,Object(p.a)(t,1)[0].thumbUrl);return r.a.createElement(ie.a,{className:"imgContainer",key:n,cols:1},r.a.createElement("img",{className:"image",src:n,alt:a}),r.a.createElement("div",{className:"img-overlay"},r.a.createElement(le.a,{container:!0,direction:"row",spacing:4},r.a.createElement(le.a,{item:!0,xs:!0,style:{display:"flex",alignItems:"center"}},r.a.createElement(G.a,{style:{marginTop:"2px"}})," 13"),r.a.createElement(le.a,{item:!0,xs:!0,style:{display:"flex",alignItems:"center"}},r.a.createElement(pe.a,{style:{marginTop:"2px"}})," 24"))))})))))}var fe={isAuthenticated:!1,authenticate:function(e){""!==w("token")&&(fe.isAuthenticated=!0)},signout:function(e){fe.isAuthenticated=!1,setTimeout(e,100)}};function Ee(e){var t=e.component,a=Object(s.a)(e,["component"]);return r.a.createElement(y.b,Object.assign({},a,{render:function(e){return""!==w("token")?r.a.createElement(t,Object.assign({},e,a)):r.a.createElement(y.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var ve=function(){return r.a.createElement("div",{className:"flexwrapper"},r.a.createElement(W.a,null,r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/",render:function(){return fe.isAuthenticated?r.a.createElement(y.a,{to:"/dashboard"}):r.a.createElement(y.a,{to:"/login"})}}),r.a.createElement(y.b,{path:"/login"},r.a.createElement(x,null)),r.a.createElement(Ee,{path:"/dashboard"},r.a.createElement(ce,null)),r.a.createElement(Ee,{path:"/profile/:id",component:he}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var be=Object(l.a)();o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{theme:be},r.a.createElement(ve,null))),document.getElementById("root"));var je=document.getElementById("index");"undefined"!==typeof document&&je&&o.a.render(r.a.createElement(ve,null),je),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,a){},81:function(e,t,a){e.exports=a.p+"static/media/login.a84414a6.jpeg"}},[[104,1,2]]]);
//# sourceMappingURL=main.2e403868.chunk.js.map